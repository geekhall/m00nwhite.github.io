---
layout: post
title:  "Vue 笔记 2 - Vue组件"
date:   2021-09-02 12:10:25 +0800
categories: vue
---
* 目录
{:toc}

# Vue 笔记 2 - 组件
组件是可复用的 Vue 实例，且带有一个名字。

## 非单文件组件
一个文件中包含多个组件。
Vue中使用组件的三大步骤：
1. 定义组件
2. 注册组件
3. 使用组件（写组件标签）

### 1. 如何定义一个组件
使用Vue.extend(options)创建，其中options和new Vue(options)时传入的那个options几乎一样，
区别如下：
1. el不要写，因为最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器；
2. data必须写成函数，为什么？ -- 避免组件被复用时，数据存在引用关系。
备注：使用template可以配置组件结构

### 2. 如何注册组件
1. 局部注册：new Vue的时候传入components选项
2. 全局注册：Vue.component('组件名',组件)
### 3. 使用组件
`<component></component>`

```html
<div id="root">
    <h2>{{msg}}</h2>
    <!-- <xuexiao></xuexiao> -->
    <school></school>
    <hr>
    <!-- <xuesheng></xuesheng> -->
    <!-- <xuesheng></xuesheng> -->
    <!-- <xuesheng></xuesheng> -->
    <student></student>
    <student></student>
    <hello></hello>
</div>

<hr>

<div id="root2">
    <hello></hello>
</div>
<hr>

<script>
    Vue.config.productionTip = false

    // 1. 创建school组件
    const school = Vue.extend({
        template:`
            <div>
                <h2>学校名称：{{schoolName}}</h2>
                <h2>学校地址：{{address}}</h2>
                <button @click="showName">显示学校名称</button>
            </div>
        `,    
        // 组件不要写el配置项
        data() {
            return {
                schoolName: '极客堂',
                address: '北京'
            }
        },
        methods: {
            showName(){
                console.log(this.schoolName)
            }
        }
    })

    // 1. 创建student组件
    const student = Vue.extend({
        template:`
            <div>
                <h2>学生名称：{{studentName}}</h2>
                <h2>学生年龄：{{age}}</h2>
            </div>
        `,
        // 组件不要写el配置项
        data() {
            return {
                studentName: '月白',
                age: 18
            }
        }
    })

    const hello = Vue.extend({
        template: `
            <div>
                <h2>Hello {{name}}</h2>    
            </div>
        `,
        data(){
            return {
                name: 'Component'
            }
        }
    })

    // 全局注册组件
    Vue.component('hello', hello)
    // 创建vm
    new Vue({
        el: '#root',
        data: {
            msg: "组件基础"
        },
        // 2. 注册组件(非简写形式)
        // components: {
        //     xuexiao: school,
        //     xuesheng: student
        // },
        // 2. 注册组件（简写形式）
        components: {
            school,
            student,
            // hello    // 因为全局已经注册过hello组件，所以这里不用注册。
        }
    })

    new Vue({
        el: '#root2',
        data: {
            msg: "root2"
        },
        components: {
            // hello
        }
    })
</script>
```

### 几个注意点
* 1.关于组件名


### 组件的嵌套
```html
<div id="root">
</div>

<script>
    Vue.config.productionTip = false

    // 1. 创建student组件
    const student = Vue.extend({
        name: 'student',
        template:`
            <div>
                <h2>学生名称：{{name}}</h2>
                <h2>学生年龄：{{age}}</h2>
            </div>
        `,
        data() {
            return {
                name: '月白',
                age: 18
            }
        }
    })

    // 1. 创建school组件
    const school = Vue.extend({
        name: 'school',
        template:`
            <div>
                <h2>学校名称：{{name}}</h2>
                <h2>学校地址：{{address}}</h2>
                <button @click="showName">显示学校名称</button>
                <student></student>
            </div>
        `,
        data() {
            return {
                name: '极客堂',
                address: '北京'
            }
        },
        methods: {
            showName(){
                console.log(this.name)
            }
        },
        components: {
            student
        }
    })

    const hello = Vue.extend({
        name: 'hello',
        template: `
            <div>
                <h2>Hello {{name}}</h2>    
            </div>
        `,
        data(){
            return {
                name: 'Component'
            }
        }
    })
    const app = Vue.extend({
        name: 'app',
        template:`
            <div>
                <hello></hello>
                <school></school>    
            </div>
        `,
        components: {
            school,
            hello
        }
    })
    // 创建vm
    new Vue({
        el: '#root',
        template: `<app></app>`
        data: {
            msg: "组件基础"
        },
        components: {
            app
        }
    })
</script>

```
## 单文件组件
一个文件中只有一个组件。

## VueCLI
安装
```
npm install -g @vue/cli
```

切换到想要创建项目的目录，创建项目
```
vue create xxxx
```

启动项目
```
npm run server
```

