---
layout: post
title:  "Hexo 笔记"
date:   2021-09-13 13:10:25 +0800
categories: hexo
---
* 目录
{:toc}

# Hexo笔记

## 安装
```bash
npm install hexo-cli -g
```

前提：需要安装好node.js和git
* node.js ： [https://nodejs.org/zh-cn/](https://nodejs.org/zh-cn/)
* Git ： [https://git-scm.com/](https://git-scm.com/)




```bash
# hexo init 需要在一个空文件夹执行
hexo init

# or 
hexo init directory

# cd directory
npm install

# 启动
hexo server
```



然后访问: http://localhost:4000 就可以看到页面了


## 常用命令

### 清空网站缓存
```bash
hexo clean 
# or
hexo cl
```

### 新增文章
```bash
hexo new "New Post"
```

### 启动服务
```bash
hexo server
# or
hexo s
```

### 生成静态文件
```bash
hexo generate 
# or
hexo g
```

### 发布至远程
```bash
hexo deploy
# or
hexo d
```

需要修改`_config.yml`，添加远程发布配置参数

```yml
# Deployment
## Docs: https://hexo.io/docs/one-command-deployment
deploy:
  type: git
  repo: git@gitee.com:sjdt/sjdt.git
  branch: master
  message: 
```

### 常用组合命令

```bash
# 清理、生成、本地发布
hexo cl && hexo g && hexo s
# 清理、生成、远程发布
hexo cl && hexo g && hexo d
```


### 更换主题

可以从（[https://hexo.io/themes/](https://hexo.io/themes/)）下载主题，下载到`themes`目录下，然后修改`_config.yml`文件中的`theme`为对应的主题名称（文件夹名）即可：
```yml
theme: hexo-theme-matery
```


### Gitee Pages
Gitee Pages 是一个免费的静态网页托管服务，您可以使用 Gitee Pages 托管博客、项目官网等静态网页。如果您使用过 Github Pages 那么您会很快上手使用 Gitee 的 Pages服务。目前 Gitee Pages 支持 `Jekyll`、`Hugo`、`Hexo`编译静态资源。

注意需要在下面的位置申请开通 Gitee Pages服务，需要实名认证并上传证件图片并等待一个工作日审核

![](https://yinyang.space/img/20210913_gitee_01.png)



开通后需要建立一个与用户名相同的仓库，比如我的用户名为sjdt，
那么我的gitee page 仓库地址就是：[git@gitee.com:sjdt/sjdt.git]


### 自动化

1. 安装playwrite库
```bash
python -m playwright install
```

playwrite文档：[https://playwright.dev/python/docs/intro/](https://playwright.dev/python/docs/intro/)


将你的Gitee用户名和密码添加到环境变量的`gitee_username`和`gitee_username`环境变量中，
然后就可以使用下面的脚本自动提交并更新GiteePages了。

```python
#!/usr/bin/env python3
# -*- coding:UTF-8 -*-
import os
from playwright.sync_api import sync_playwright

USERNAME = os.getenv("gitee_username")
PASSWORD = os.getenv("gitee_password")

GITEE_PAGES_URL = 'https://gitee.com/sjdt/sjdt/pages'

def main():
    print("========================== deploy job : started ==========================")
    os.system("cd /Users/yiny/Sites/moonwhite.net;hexo cl && hexo g && hexo d")
    print("========================== deploy job : publish ==========================")
    with sync_playwright() as p:
        for browser_type in [p.chromium]:
            browser = browser_type.launch(headless=False)
            page = browser.new_page()
            #page.screenshot(path=f'example-{browser_type.name}.png')
            page.goto('https://gitee.com/login')
            page.click('input[name="user[login]"]');
            page.fill('input[name="user[login]"]', USERNAME);
            page.click('input[name="user[login]"]');
            page.fill('input[name="user[password]"]', PASSWORD);
            page.click("input[value='登 录']")
            page.wait_for_timeout(5000)
            page.goto(GITEE_PAGES_URL)
            page.on("dialog", lambda dialog: dialog.accept())
            page.click(".update_deploy")
            page.wait_for_selector('span:text("已开启 Gitee Pages 服务")', timeout=60 * 1000, state='visible')
            browser.close()
    print("========================== deploy job : finished ==========================")
if __name__ == '__main__':
    main()
```




## Hexo的使用

